</span></span><!DOCTYPE html>
<html lang="en">
	
<!-- Mirrored from html.creativegigstf.com/deski/deski/doc-fullwidth.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 30 Jan 2022 17:09:30 GMT -->
<head>
		<meta charset="UTF-8">
		<meta name="keywords" content="Digital marketing agency, Digital marketing company, Digital marketing services, sass, software company">
		<meta name="description" content="Deski is a creative saas and software html template designed for saas and software Agency websites.">
      	<meta property="og:site_name" content="deski">
      	<meta property="og:url" content="https://heloshape.com/">
      	<meta property="og:type" content="website">
      	<meta property="og:title" content="Deski: creative saas and software html template">
		<meta name='og:image' content='images/assets/ogg.png'>
		<!-- For IE -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!-- For Resposive Device -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- For Window Tab Color -->
		<!-- Chrome, Firefox OS and Opera -->
		<meta name="theme-color" content="#2a2a2a">
		<!-- Windows Phone -->
		<meta name="msapplication-navbutton-color" content="#2a2a2a">
		<!-- iOS Safari -->
		<meta name="apple-mobile-web-app-status-bar-style" content="#2a2a2a">
		<title>Blockwatch - Polywrap Documentation</title>
		<!-- Favicon -->
		<link rel="icon" type="image/png" sizes="56x56" href="images/fav-icon/icon.png">
		<!-- Main style sheet -->
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<!-- responsive style sheet -->
		<link rel="stylesheet" type="text/css" href="css/responsive.css">

		<!-- Fix Internet Explorer ______________________________________-->
		<!--[if lt IE 9]>
			<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
			<script src="vendor/html5shiv.js"></script>
			<script src="vendor/respond.js"></script>
		<![endif]-->	
	</head>

	<body data-spy="scroll" data-target=".main-side-nav" data-offset="100">
		<div class="clearfix">
			<!-- ===================================================
				Loading Transition
			==================================================== -->
			<section>
				<div id="preloader">
					<div id="ctn-preloader" class="ctn-preloader">
						<div class="animation-preloader">
							<div class="spinner"></div>
							<div class="txt-loading">
								<span data-text-preloader="D" class="letters-loading">
									B
								</span>
								<span data-text-preloader="E" class="letters-loading">
									W
								</span>
								<span data-text-preloader="S" class="letters-loading">
									-
								</span>
								<span data-text-preloader="K" class="letters-loading">
									P
								</span>
								<span data-text-preloader="I" class="letters-loading">
									O
								</span>
								<span data-text-preloader="K" class="letters-loading">
									L
								</span>
								<span data-text-preloader="I" class="letters-loading">
									Y
								</span>
								<span data-text-preloader="K" class="letters-loading">
									W
								</span>
								<span data-text-preloader="I" class="letters-loading">
									R
								</span>
								<span data-text-preloader="K" class="letters-loading">
									A
								</span>
								<span data-text-preloader="I" class="letters-loading">
									P
								</span>
							</div>
						</div>	
					</div>
				</div>
			</section>


			<!-- 
			=============================================
				Theme Main Menu
			============================================== 
			-->
			<div class="theme-main-menu sticky-menu theme-menu-three">
				<div class="d-flex align-items-center justify-content-center">
					<div class="logo"><a href="index-doc.html"><img src="images/logo/deski_01.svg" alt=""></a></div>

					<nav id="mega-menu-holder" class="navbar navbar-expand-lg">
						<div  class="container nav-container">
							<button class="navbar-toggler navbar-toggler-right" type="button" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
						        <i class="flaticon-menu-of-three-lines"></i>
						    </button>
						   <div class="navbar-collapse collapse" id="navbarSupportedContent">
						   		<div class="d-lg-flex justify-content-between align-items-center">
						   			<ul class="navbar-nav">
										<li class="nav-item dropdown position-static active">
								            <a class="nav-link" href="./index.html">Home</a>
								        </li>
								        <li class="nav-item dropdown">
								            <a class="nav-link" href="./doc-quickstart.html">Polydomains</a>
								        </li>
								        <li class="nav-item dropdown">
								            <a class="nav-link" href="./doc-quickstart.html">Hicetnunc</a>
								        </li>
								        <li class="nav-item dropdown">
								            <a class="nav-link" href="./doc-quickstart.html">Harbinger</a>
								        </li>
								   </ul>

									<ul class="right-widget user-login-button d-flex align-items-center justify-content-center">
										<li>
											<a href="#" class="signIn-action d-flex align-items-center">
												<i class="fa fa-info-circle"></i> &nbsp;
												<span>About</span>
											</a>
										</li>
										<li>
											<a href="./doc-quickstart.html" class="signUp-action d-flex align-items-center">
												<span>Getting Started</span>
												<img src="images/icon/53.svg" alt="">
											</a>
										</li>
									</ul>
						   		</div>
						   	</div>
						</div> 
					</nav>
				</div>
			</div> <!-- /.theme-main-menu -->

			

			<!-- 
			=============================================
				Documentation
			============================================== 
			-->
			<div class="doc-container full-width top-border">
				<div class="clearfix">
					<div class="row flex-xl-nowrap no-gutters">
						<!-- ****************************** DOC SIDEBAR ********************************* -->
						<div class="col-md-3 col-xl-2 doc-sidebar">
							<div class="clearfix">
								<button class="btn btn-link d-md-none collapsed" type="button" data-target="#doc-sidebar-nav" aria-controls="doc-sidebar-nav" aria-expanded="false" aria-label="Toggle docs navigation"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" width="30" height="30" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-miterlimit="10" d="M4 7h22M4 15h22M4 23h22"></path></svg></button>
							</div>
							<nav class="doc-links collapse clearfix nav-fix" id="doc-sidebar-nav">
								<div class="search-form">
									<form action="#">
										<input type="text" placeholder="Search here..">
										<button><img src="images/icon/59.svg" alt=""></button>
									</form>
								</div>
								<ul class="list-item">
									<li class="dropdown-holder">
										<h4>Getting Started</h4>
										<ul class="sub-menu">
											<li><a href="./doc-quickstart.html" >Quick start</a></li>
											<li><a href="./doc-setup.html">Setup</a></li>
										</ul>
									</li>
									<li class="dropdown-holder">
										<h4>Polydomains</h4>
										<ul class="sub-menu">
											<li><a href="./doc-polydomains-intro.html">Introduction</a></li>
											<li><a href="./doc-polydomains-wrapper.html">Polywrapper</a></li>
											<li><a href="./doc-polydomains-js.html">JS Integration</a></li>
										</ul>
									</li>
									<li class="dropdown-holder">
										<h4>Hicetnunc</h4>
										<ul class="sub-menu">
											<li><a href="./doc-hicetnunc-intro.html">Introduction</a></li>
											<li><a href="./doc-hicetnunc-wrapper.html">Polywrapper</a></li>
											<li><a href="./doc-hicetnunc-js.html">JS Integration</a></li>
										</ul>
									</li>
									<li class="dropdown-holder">
										<h4>Harbinger</h4>
										<ul class="sub-menu show">
											<li><a href="./doc-harbinger-intro.html">Introduction</a></li>
											<li><a href="./doc-harbinger-wrapper.html" class="active">Polywrapper</a></li>
											<li><a href="./doc-harbinger-js.html">JS Integration</a></li>
										</ul>
									</li>
									<li class="dropdown-holder">
										<h4>Resources</h4>
										<ul class="sub-menu">
											<li><a href="https://polywrap.io">Polywrap &nbsp;<i
														class="fa fa-external-link"></i> </a></li>
											<li><a href="https://webassembly.org/">Web Assembly &nbsp;<i
														class="fa fa-external-link"></i> </a></li>
											<li><a href="https://www.assemblyscript.org/">Assembly Script &nbsp;<i
														class="fa fa-external-link"></i> </a></li>
											<li><a href="https://fleek.co/">Fleek &nbsp;<i class="fa fa-external-link"></i>
												</a></li>
											<li><a href="https://ipfs.io/">IPFS &nbsp;<i class="fa fa-external-link"></i>
												</a></li>
										</ul>
									</li>
								</ul>
							</nav> <!-- /.doc-links -->
						</div> <!-- /.doc-sidebar -->
						<!-- ****************************** DOC MAIN BODY ********************************* -->
						<main class="col-md-9 col-xl-8 doc-main-body">
							
							<h2>Harbinger</h2>

							<h3 id="installing">Wrapper Example</h3>
							<p>The Harbinger wrapper can be found in ./tezos/harbinger/wrapper folder in the poly GitHub Repo.</p>
							<p>To setup and get it running remove these lines of code from the package.json file</p>
							<div class="mark-blue">
								“@web3api/tezos-test-env”: “0.0.1-prealpha.61”,
								“@web3api/tezos-plugin-js”: “0.0.1-prealpha.61”,
							</div> 

							<p>Now link the wrapper to Tezos-plugin-js using the command</p>
							<div class="mark-red">
								yarn link @web3api/tezos-plugin-js
							</div> 


							<p>Now link the wrapper to tezos-test-env using the command</p>
							<div class="mark-red">
								yarn link @web3api/tezos-test-env
							</div> 


							<p>Install the node packages using the command </p>
							<div class="mark-red">
								yarn
							</div> 

							<p>Build the plugin-js project using the command</p>
							<div class="mark-red">
								yarn build
							</div> 

							<p>Install the node packages using the command </p>
							<div class="mark-red">
								yarn
							</div> 


							<h3 id="installing">Running Tests</h3>
							<p>The e2e tests can be found in the src/__tests__/e2e folder.</p>
							<p>Run the e2e tests using the command</p>
							<div class="mark-red">
								yarn test
							</div>



							<h3 id="installing">Project Structure</h3>
														 
							<p>
								<b>Queries :</b>
								can be found in ./src/query folder if contains the index.ts file which is the assembly script query logic and schema.graphql file which contains the graphql schemas for the functions in the query's index file.
							</p>


							<pre class="bg-black">
								<code>
									
									<span class="s2">export function getAssetData(input: Input_getAssetData): GetAssetResponse {</span>
									<span class="s2">if (input.network == Network.custom && input.custom === null) {</span>
									<span class="s2">throw new Error(`custom network should have a valid connection and oracle contract address `)</span>
									<span class="s2">}</span>
									<span class="s2">let oracleContractAddress: string = "KT1Jr5t9UvGiqkvvsuUbPJHaYx24NzdUwNW9";</span>
									<span class="s2">let connection: Tezos_Connection = {</span>
									<span class="s2">provider: "https://rpc.tzstats.com",</span>
									<span class="s2">networkNameOrChainId: "mainnet"</span>
									<span class="s2">};</span>
									<span class="s2">switch (input.network) {</span>
									<span class="s2">case Network.granadanet:</span>
									<span class="s2">connection = <Tezos_Connection> {</span>
									<span class="s2">provider: "https://rpc.granada.tzstats.com",</span>
									<span class="s2">networkNameOrChainId: "granadanet"  </span>
									<span class="s2">}</span>
									<span class="s2">oracleContractAddress = "KT1ENR6CK7cBWCtZt1G3PovwTw3FgSW472mS";</span>
									<span class="s2">break;</span>
									<span class="s2">case Network.custom:</span>
									<span class="s2">connection = input.custom!.connection;</span>
									<span class="s2">oracleContractAddress = input.custom!.oracleContractAddress;</span>
									<span class="s2">break;</span>
									<span class="s2">}</span>
									<span class="s2">const storageValue = Tezos_Query.getContractStorage({</span>
									<span class="s2">address: oracleContractAddress,</span>
									<span class="s2">connection: connection,</span>
									<span class="s2">key: "oracleData",</span>
									<span class="s2">field: input.assetCode</span>
									<span class="s2">});</span>
									<span class="s2">const assetData = <JSON.Obj>JSON.parse(storageValue);</span>
									<span class="s2">return {</span>
									<span class="s2">low:  normalizeValue(parseFloat(getString(assetData, "4"))),</span>
									<span class="s2">open: normalizeValue(parseFloat(getString(assetData, "2"))),</span>
									<span class="s2">high: normalizeValue(parseFloat(getString(assetData, "3"))),</span>
									<span class="s2">asset: input.assetCode,</span>
									<span class="s2">close: normalizeValue(parseFloat(getString(assetData, "5"))),</span>
									<span class="s2">volume: normalizeValue(parseFloat(getString(assetData, "6"))),</span>
									<span class="s2">endPeriod: getString(assetData, "1"),</span>
									<span class="s2">startPeriod: getString(assetData, "0"),</span>
									<span class="s2">};</span>
									<span class="s2">}</span>
									  

								</code>
							</pre> <!-- /.bg-black -->


							<p>
								<b>Tests :</b>
								To test the function written in the query/index.ts e2e tests are written in the __tests__/e2e folder.
							</p>


							<pre class="bg-black">
								<code>
									<span class="s2">it("should get asset data for `XTZ-USD` on mainnet", async () => {</span>
									<span class="s2">const response =  await client.query<{ getAssetData: QuerySchema.GetAssetResponse}>({</span>
									<span class="s2">uri: ensUri,</span>
									<span class="s2">query: `</span>
									<span class="s2">query {</span>
									<span class="s2">getAssetData(</span>
									<span class="s2">assetCode: $assetCode,</span>
									<span class="s2">network: mainnet</span>
									<span class="s2">)</span>
									<span class="s2">}</span>
									<span class="s2">`,</span>
									<span class="s2">variables: {</span>
									<span class="s2">assetCode: "XTZ-USD",</span>
									<span class="s2">network: "granadanet",</span>
									<span class="s2">}</span>
									<span class="s2">})</span>

									<span class="s2">expect(response.errors).toBeUndefined()</span>
									<span class="s2">expect(response.data).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData.low).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData.open).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData.high).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData.asset).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData.close).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData.volume).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData.endPeriod).toBeDefined()</span>
									<span class="s2">expect(response.data?.getAssetData.startPeriod).toBeDefined()</span>
									<span class="s2">})</span>
								</code>
							</pre> <!-- /.bg-black -->
															
							

							<div class="doc-pagination pt-40">
								<ul class="d-flex align-items-center justify-content-between">
									<li class="d-flex align-items-center">
										<a href="./doc-harbinger-intro.html"><i class="fa fa-angle-left" aria-hidden="true"></i></a>&nbsp;&nbsp;&nbsp;
										<span>Harbinger Introduction</span>
									</li>
									<li class="d-flex align-items-center">
										<span>Harbinger JS Integration</span> &nbsp;&nbsp;&nbsp;
										<a href="./doc-harbinger-js.html"><i class="fa fa-angle-right" aria-hidden="true"></i></a>
									</li>
								</ul>
							</div>
						</main> <!-- /.doc-main-body -->
						<nav class="d-none d-xl-block col-xl-2 doc-sideNav">
							<div class="wrapper">
								<nav class="main-side-nav">
									<a href="#installing" class="nav-link">Installing Deski</a>
									<a href="#verifying" class="nav-link">Verifying Installation</a>
									<a href="#manual-installation" class="nav-link">Manual Installation</a>
									<a href="#running-example" class="nav-link">Running example website</a>
									<a href="#launching-server" class="nav-link">Launching the server</a>
									<a href="#loading-dialog" class="nav-link">Loading dialog</a>
								</nav>
							</div>
						</nav>
					</div>
				</div>
			</div> <!-- /.doc-container -->

			<!-- Scroll Top Button -->
			<button class="scroll-top">
				<i class="fa fa-angle-up" aria-hidden="true"></i>
			</button>


		<!-- Optional JavaScript _____________________________  -->

    	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
    	<!-- jQuery -->
		<script src="vendor/jquery.min.js"></script>
		<!-- Popper js -->
		<script src="vendor/popper.js/popper.min.js"></script>
		<!-- Bootstrap JS -->
		<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
	    <!-- menu  -->
		<script src="vendor/mega-menu/assets/js/custom.js"></script>
		<!-- AOS js -->
		<script src="vendor/aos-next/dist/aos.js"></script>
		<!-- js count to -->
		<script src="vendor/jquery.appear.js"></script>
		<script src="vendor/jquery.countTo.js"></script>
		<!-- Slick Slider -->
		<script src="vendor/slick/slick.min.js"></script>
		<!-- Google map js -->
		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCjQLCCbRKFhsr8BY78g2PQ0_bTyrm_YXU"></script>
		<script src="vendor/sanzzy-map/dist/snazzy-info-window.min.js"></script>

		<!-- Theme js -->
		<script src="js/theme.js"></script>
		</div> <!-- /.main-page-wrapper -->
	</body>

<!-- Mirrored from html.creativegigstf.com/deski/deski/doc-fullwidth.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 30 Jan 2022 17:09:30 GMT -->
</html>